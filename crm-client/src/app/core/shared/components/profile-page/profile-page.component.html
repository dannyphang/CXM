<!-- <app-toast></app-toast> -->

<div class="tw-flex profile-box" *ngIf="contactProfile || companyProfile">
  <!-- desktop -->
  <p-splitter
    [panelSizes]="[25, 75]"
    [minSizes]="[20, 50]"
    *ngIf="windowSize.desktop"
  >
    <ng-template pTemplate>
      <app-left-panel
        class="left-panel-area tw-w-full tw-px-[var(--content-gap)]"
        [module]="module"
        [propertiesList]="propertiesList"
        [contactProfile]="contactProfile"
        [companyProfile]="companyProfile"
        (profileUpdateEmit)="profileUpdate($event)"
        [permission]="permission"
      ></app-left-panel>
    </ng-template>

    <ng-template pTemplate>
      <p-splitter [panelSizes]="[70, 30]" [minSizes]="[50, 20]">
        <ng-template pTemplate>
          <app-middle-panel
            [module]="module"
            [contactProfile]="contactProfile"
            [companyProfile]="companyProfile"
            [activitiesList]="activitiesList"
            class="middle-panel-area tw-w-full tw-px-[var(--content-gap)]"
            (activityListEmit)="getActivities()"
            [permission]="permission"
          ></app-middle-panel>
        </ng-template>

        <ng-template pTemplate>
          <app-right-panel
            class="tw-w-full tw-px-[var(--content-gap)]"
            [module]="module"
            [propertiesList]="propertiesList"
            [contactProfile]="contactProfile"
            [companyProfile]="companyProfile"
            [activitiesList]="activitiesList"
            (getProfileEmit)="
              returnEvent($event) === 'CONT' ? getContact() : getCompany()
            "
            (getActivityEmit)="getActivities()"
          ></app-right-panel>
        </ng-template>
      </p-splitter>

      <!-- <app-base-button
        [iconName]="
          isRightPanelShow
            ? 'pi pi-angle-double-right'
            : 'pi pi-angle-double-left'
        "
        [rounded]="true"
        (onClick)="isRightPanelShow = !isRightPanelShow"
        [buttonClass]="'tw-p-[0px!important]'"
        class="tw-absolute tw-pt-[4px]"
        [ngClass]="{
          'panel-right-pos-on': isRightPanelShow, 
          'panel-right-pos-off': !isRightPanelShow, 
        }"
      ></app-base-button> -->
    </ng-template>
  </p-splitter>

  <!-- not desktop -->
  <div class="tw-w-full" *ngIf="!windowSize.desktop">
    <p-tabView class="tw-w-full profile-tab-view">
      <p-tabPanel
        [header]="
          'COMMON.' + (module === 'CONT' ? 'CONTACT' : 'COMPANY') | translate
        "
      >
        <app-left-panel
          class="left-panel-area tw-w-full"
          [module]="module"
          [propertiesList]="propertiesList"
          [contactProfile]="contactProfile"
          [companyProfile]="companyProfile"
          (profileUpdateEmit)="profileUpdate($event)"
        ></app-left-panel>
      </p-tabPanel>

      <p-tabPanel [header]="'COMMON.RECORDS' | translate">
        <app-middle-panel
          [module]="module"
          [contactProfile]="contactProfile"
          [companyProfile]="companyProfile"
          [activitiesList]="activitiesList"
          class="middle-panel-area tw-w-full"
          (activityListEmit)="getActivities()"
        ></app-middle-panel>
      </p-tabPanel>

      <p-tabPanel [header]="'COMMON.OTHERS' | translate">
        <app-right-panel
          class="tw-w-full"
          [module]="module"
          [propertiesList]="propertiesList"
          [contactProfile]="contactProfile"
          [companyProfile]="companyProfile"
          [activitiesList]="activitiesList"
          (getProfileEmit)="
            returnEvent($event) === 'CONT' ? getContact() : getCompany()
          "
          (getActivityEmit)="getActivities()"
        ></app-right-panel>
      </p-tabPanel>
    </p-tabView>
  </div>
</div>
