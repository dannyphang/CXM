<p-dialog
  [(visible)]="visible"
  [style]="{ width: '70%' }"
  [modal]="false"
  [closable]="false"
>
  <ng-template pTemplate="header">
    <div class="activity-dialog-header tw-w-full">
      <div class="header-line tw-flex tw-justify-center">
        <span class="header-line-span"></span>
      </div>
      <div>
        <h3>{{ header }}</h3>
      </div>
    </div>
  </ng-template>
  <app-base-form [formConfig]="activityFormConfig"></app-base-form>

  <div class="text-editor tw-px-[var(--content-gap)]">
    <p-editor
      [formControl]="editorFormControl"
      [style]="{ height: '200px' }"
      [readonly]="false"
      (onTextChange)="countTextLength($event)"
      [placeholder]="'ACTIVITY.EDITOR_PLACEHOLDER' | translate"
    />
  </div>

  <div
    class="tw-flex tw-justify-between tw-items-center tw-px-[var(--content-gap)]"
  >
    <div class="tw-grid tw-items-center">
      {{ contentWordLength }} / {{ editorContentLimit }}
      {{ "ACTIVITY.WORDS" | translate }}
    </div>
    <app-base-button
      [iconName]="'pi pi-plus'"
      [rounded]="true"
      (onClick)="uploader.click()"
      class="tw-mt-[15px]"
      [pTooltip]="'BUTTON.ATTACH_FILE' | translate"
    ></app-base-button>
    <app-base-button
      label="Associated with 1 records"
      [isTextStyle]="true"
      (onClick)="assoPanel.toggle($event)"
    ></app-base-button>
  </div>

  <input
    type="file"
    id="file-input"
    #uploader
    hidden
    (change)="fileUpload($event)"
    multiple
  />

  <div
    class="attachment-div tw-mt-[15px] tw-flex"
    *ngIf="attachmentList.length > 0"
  >
    <div class="tw-grid tw-items-center tw-mr-[15px]">
      <div class="pi pi-paperclip"></div>
    </div>
    <div class="attachment-chip-div tw-flex tw-flex-wrap">
      <app-chip
        *ngFor="let file of attachmentList"
        label="{{ file.name }} ({{ returnFileSize(file.size) }})"
        class="tw-mr-2 tw-mt-1"
        [isFile]="true"
        [file]="file"
        (remove)="removeFile($event)"
      ></app-chip>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="tw-flex tw-justify-between">
      <app-base-button
        [label]="'BUTTON.CANCEL'"
        [isTextStyle]="true"
        [outlined]="true"
        (onClick)="closeDialog()"
      />
      <app-base-button
        [label]="'BUTTON.SAVE'"
        (onClick)="save()"
        [disabled]="!this.activityFormGroup.valid"
      />
    </div>
  </ng-template>
</p-dialog>

<p-overlayPanel #assoPanel>
  <!-- <div class="asso-div tw-flex tw-w-[600px]">
    <div class="ass-left tw-w-[30%]">
      <p-button [text]="true" styleClass="tw-flex tw-w-full tw-justify-between">
        <div>
          {{ "PROFILE.SELECTED" | translate }}
        </div>
        <div>0</div>
      </p-button>
      <p-button [text]="true" styleClass="tw-flex tw-w-full tw-justify-between">
        <div>
          {{ "PROFILE.COMPANYS" | translate }}
        </div>
        <div>0</div>
      </p-button>
      <p-button
        [text]="true"
        styleClass="tw-flex tw-w-full tw-justify-between"
        (onClick)="assoMode = 'CONTACTS'"
      >
        <div>
          {{ "PROFILE.CONTACTS" | translate }}
        </div>
        <div>0</div>
      </p-button>
    </div>
    <div class="ass-right tw-w-[70%] tw-h-[400px]">
      <app-base-input
        [placeholder]="'COMMON.SEARCH' | translate"
        [fieldControl]="searchAsso"
      ></app-base-input>

      <app-base-checkbox
        [options]="assoList"
        [fieldControl]="returnAssoFormControl()"
      ></app-base-checkbox>
    </div>
  </div> -->
  <div class="asso-div tw-flex">
    <p-tabView>
      <p-tabPanel>
        <ng-template pTemplate="header">
          <div styleClass="tw-flex tw-w-full tw-justify-between">
            {{ "PROFILE.COMPANYS" | translate }}
          </div>
          <div>(0)</div>
        </ng-template>
        <div>
          <app-base-form [formConfig]="assoFormConfig"></app-base-form>
        </div>
      </p-tabPanel>
      <p-tabPanel>
        <ng-template pTemplate="header">
          <div styleClass="tw-flex tw-w-full tw-justify-between">
            {{ "PROFILE.CONTACTS" | translate }}
          </div>
          <div>(0)</div>
        </ng-template>
        <div>
          <app-base-form [formConfig]="assoFormConfig"></app-base-form>
        </div>
      </p-tabPanel>
    </p-tabView>
  </div>
</p-overlayPanel>
