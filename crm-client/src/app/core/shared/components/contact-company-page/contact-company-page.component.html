<div class="page-container tw-m-[15px]">
  <div class="tw-flex">
    <div class="tw-justify-between tw-w-full tw-grid tw-items-center">
      <app-base-label
        [label]="'Company'"
        *ngIf="module === 'COMP'"
      ></app-base-label>
      <app-base-label
        [label]="'Contact'"
        *ngIf="module === 'CONT'"
      ></app-base-label>
    </div>
    <div class="action-div tw-flex">
      <p-button
        [icon]="'pi pi-upload'"
        rounded="true"
        [text]="true"
        [pTooltip]="'Export'"
        (onClick)="exportFile(dt.processedData)"
      ></p-button>
      <p-button
        [icon]="'pi pi-download'"
        rounded="true"
        [text]="true"
        [pTooltip]="'Import'"
        (onClick)="importFile()"
      ></p-button>
      <p-button
        [icon]="'pi pi-plus'"
        rounded="true"
        [text]="true"
        [pTooltip]="'Create'"
        (onClick)="toCreate()"
      ></p-button>
    </div>
  </div>

  <p-dialog
    header="Create Contact"
    [(visible)]="displayCreateDialog"
    [style]="{ width: '70%' }"
  >
    <div *ngFor="let property of createFormConfig">
      <app-property
        [property]="property"
        [fieldControl]="createFormGroup.controls[property.propertyCode].value"
      ></app-property>
    </div>

    <ng-template pTemplate="footer">
      <p-button
        label="Cancel"
        [text]="true"
        severity="secondary"
        (click)="displayCreateDialog = false"
      />
      <p-button
        label="Save"
        [outlined]="true"
        severity="secondary"
        (click)="create()"
      />
    </ng-template>
  </p-dialog>

  <p-tabView class="">
    <p-tabPanel header="Contact" [selected]="true" [closable]="true">
      <p-table
        #dt
        [columns]="tableConfig"
        [value]="contactList"
        [(selection)]="selectedContact"
        [resizableColumns]="true"
        styleClass="p-datatable-gridlines p-datatable-striped"
      >
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th><p-tableHeaderCheckbox /></th>
            <th *ngFor="let item of columns" pSortableColumn="{{ item.code }}">
              {{ item.header }} <p-sortIcon field="{{ item.code }}" />
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-contact let-columns="columns">
          <tr>
            <td><p-tableCheckbox [value]="contact" /></td>
            <td *ngFor="let col of columns">
              <div
                *ngIf="
                  col.code === 'contactFirstName' ||
                  col.code === 'contactLastName'
                "
              >
                <p-button
                  [label]="contact[col.code]"
                  [text]="true"
                  [pTooltip]="contact[col.code]"
                  (onClick)="toProfile(contact)"
                ></p-button>
              </div>
              <div
                *ngIf="
                  col.code !== 'contactFirstName' &&
                  col.code !== 'contactLastName'
                "
                [pTooltip]="contact[col.code]"
              >
                {{ contact[col.code] }}
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-tabPanel>
  </p-tabView>
</div>
